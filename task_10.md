---
layout: page
title: Задание 10. RPG с открытым миром
---

![](/assets/nene2.png)

# RPG с открытым миром

Мы разрабатываем новую не имеющую аналогов RPG игру в аниме сеттинге с кошкодевочками волшебницами, иссекайнутыми ОЯШаями, владыками демонов и развитой системой готовки еды. Все действия происходит в огромном мире с множеством объектов, где каждый листик Сакуры должен учитываться.

А чтобы заработать как можно больше денег, мы выпускаем игру под мобильные платформы!

Поэтому физика в нашей игре должна быть энергоэффективной, чтобы телефон не обжигал руки игроков!

Пишем игру на [love2d](/theory/love2d) и языке [lua](/theory/lua), другие библиотеки не используем. 

## Level 1. Коллизия AABB и точки

Продюсеры хотят видеть результат как можно скорее. У нас есть концепция игры, но проще показать, чем объяснять игровую механику и системы. Времени совсем мало, поэтому делаем самую простую реализацию.

Можно добавлять свои идеи, но не отклоняясь от главной механики — Тира.

Главное помните — должно быть весело!

### Спринт 1.

На игровом экране в случайном месте появляются AABB цели случайного размера. Игрок, как в тире, должен попасть кликом мыши в цели, чтобы получить очки. Если в цель не попасть, то она исчезнет через какое-то время и не принесёт очки. У каждой цели случайное время жизни в каких-то пределах. Игра длится 30 секунд.

### Спринт 2.

О нет! D1-retention оказался очень низким. Так мы денег не заработаем. Нас попросили добавить ЭКШЕНА.

- AABB Цели так же появляются в случайных местах и со случайным размером.
- За попадание дают очки.
- За попадание по целям добавляется N-секунд времени игры. 
- Еще появляются движущиеся цели, которые начисляют больше очков и больше времени.
- Движения могут быть разными, смотрите формулы [изингов](https://easings.net/).
- Иногда появляются движущиеся цели-бонусы, которые дают возможность стрелять шрапнелью с какой-то дисперсией.
- Иногда появляются цели, по которым нельзя попадать, они другого цвета, иначе будет штраф времени и очков. Эти цели тоже исчезнут сами через какое-то время.
- За быстрое уничтожение целей выдают комбо, которое умножает полученные очки, но оно скидывается, если промазать, попасть по запретной цели или не уложиться во времени.

### Терминология

- AABB — (axis-aligned bounding box) "параллельный осям ограничивающий параллелепипед".
- D1-retention — количество игроков, которые вернулись играть во второй день. Чем выше, тем лучше, так как игроки продолжают играть. Цель — повышать возврат в игру.
- Дисперсия — мера разброса случайно величины.

### Оценка результата

Должны быть реализованы все фичи. Можно добавлять свои.

## Level 2. Коллизии AABB

## Level 3. Добавим слаймов: коллизии кругов

## Level 4. Вращаем мир и объекты: коллизии произвольных прямоугольников

## Level 5. Разбиваем мир на зоны

## Level 6. Разрешение коллизий

## Level 99. ???